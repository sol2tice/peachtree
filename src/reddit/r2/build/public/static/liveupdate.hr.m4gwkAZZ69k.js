(function(c,l,h){if(l.hidden===h)for(var c=["webkit","o","ms","moz"],o=0;o<c.length;o++){var k=c[o];if(l[k+"Hidden"]!==h){var p=new Event("visibilitychange");l.addEventListener(k+"visibilitychange",function(){l.dispatchEvent(p)});Object.defineProperty(l,"hidden",{get:function(){return l[k+"Hidden"]}});Object.defineProperty(l,"visibilityState",{get:function(){return l[k+"VisibilityState"]}});break}}})(this,document);
(function(){var c={},l=null,h=null,o=null,k=null,p={},m=window.devicePixelRatio||1,t=16*m,e={width:7,height:9,font:10*m+"px arial",colour:"#ffffff",background:"#F03D25",fallback:!0,crossOrigin:!0,abbreviate:!0},n=function(){var c=navigator.userAgent.toLowerCase();return function(g){return c.indexOf(g)!==-1}}(),i={ie:n("msie"),chrome:n("chrome"),webkit:n("chrome")||n("safari"),safari:n("safari")&&!n("chrome"),mozilla:n("mozilla")&&!n("chrome")&&!n("safari")},s=function(){if(!h||!l){var c;a:{c=document.getElementsByTagName("link");
for(var g=0,e=c.length;g<e;g++)if((c[g].getAttribute("rel")||"").match(/\bicon\b/)){c=c[g];break a}c=!1}h=c?c.getAttribute("href"):"/favicon.ico";l||(l=h)}return l},v=function(){if(!k)k=document.createElement("canvas"),k.width=t,k.height=t;return k},F=function(c){for(var g=document.getElementsByTagName("link"),e=document.getElementsByTagName("head")[0],i=0,m=g.length;i<m;i++)typeof g[i]!=="undefined"&&(g[i].getAttribute("rel")||"").match(/\bicon\b/)&&e.removeChild(g[i]);g=document.createElement("link");
g.type="image/x-icon";g.rel="icon";g.href=c;document.getElementsByTagName("head")[0].appendChild(g)},u=function(c){if(!v().getContext||i.ie||i.safari||p.fallback==="force")return K(c);var g=v().getContext("2d"),e=s();o=document.createElement("img");o.onload=function(){g.clearRect(0,0,t,t);g.drawImage(o,0,0,o.width,o.height,0,0,t,t);if((c+"").length>0){var e=c;if(typeof e=="number"&&e>99&&p.abbreviate)for(var h=[["G",1E9],["M",1E6],["k",1E3]],k=0;k<h.length;++k)if(e>=h[k][1]){e=(new Number(e/h[k][1])).toFixed(void 0)+
h[k][0];break}var h=t-p.height*m,k=t-(p.width*m+6*m*((e+"").length-1))-m,n=16*m,l=16*m,s=2*m;g.font=(i.webkit?"bold ":"")+p.font;g.fillStyle=p.background;g.strokeStyle=p.background;g.lineWidth=m;g.beginPath();g.moveTo(k+s,h);g.quadraticCurveTo(k,h,k,h+s);g.lineTo(k,n-s);g.quadraticCurveTo(k,n,k+s,n);g.lineTo(l-s,n);g.quadraticCurveTo(l,n,l,n-s);g.lineTo(l,h+s);g.quadraticCurveTo(l,h,l-s,h);g.closePath();g.fill();g.beginPath();g.strokeStyle="rgba(0,0,0,0.3)";g.moveTo(k+s/2,n);g.lineTo(l-s/2,n);g.stroke();
g.fillStyle=p.colour;g.textAlign="right";g.textBaseline="top";g.fillText(e,m===2?29:15,i.mozilla?7*m:6*m)}v().getContext&&F(v().toDataURL())};if(!e.match(/^data/)&&p.crossOrigin)o.crossOrigin="anonymous";o.src=e},K=function(c){if(p.fallback){var e=document.title;e[0]==="("&&(e=e.slice(e.indexOf(" ")));document.title=(c+"").length>0?"("+c+") "+e:e}};c.setOptions=function(c){p={};for(var g in e)p[g]=c.hasOwnProperty(g)?c[g]:e[g];return this};c.setImage=function(c){l=c;v().getContext&&F(v().toDataURL());
return this};c.setBubble=function(c,e){u(c||"",e);return this};c.reset=function(){F(h)};c.setOptions(e);window.Tinycon=c;typeof define==="function"&&define.amd&&define(c)})();
(function(c){function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function h(a,b){var d=!0;return e(function(){d&&(f.suppressDeprecationWarnings===!1&&typeof console!=="undefined"&&console.warn&&console.warn("Deprecation warning: "+a),d=!1);return b.apply(this,arguments)},b)}function o(a,b){return function(d){return i(a.call(this,d),b)}}function k(a,b){return function(d){return this.lang().ordinal(a.call(this,
d),b)}}function p(){}function m(a){da(a);e(this,a)}function t(a){var a=K(a),b=a.year||0,d=a.quarter||0,j=a.month||0,c=a.week||0,f=a.day||0;this._milliseconds=+(a.millisecond||0)+(a.second||0)*1E3+(a.minute||0)*6E4+(a.hour||0)*36E5;this._days=+f+c*7;this._months=+j+d*3+b*12;this._data={};this._bubble()}function e(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);if(b.hasOwnProperty("toString"))a.toString=b.toString;if(b.hasOwnProperty("valueOf"))a.valueOf=b.valueOf;return a}function n(a){return a<
0?Math.ceil(a):Math.floor(a)}function i(a,b,d){for(var j=""+Math.abs(a);j.length<b;)j="0"+j;return(a>=0?d?"+":"":"-")+j}function s(a,b,d,j){var c=b._milliseconds,e=b._days,b=b._months,j=j==null?!0:j;c&&a._d.setTime(+a._d+c*d);e&&fa(a,"Date",R(a,"Date")+e*d);b&&ga(a,R(a,"Month")+b*d);j&&f.updateOffset(a,e||b)}function v(a){return Object.prototype.toString.call(a)==="[object Array]"}function F(a,b,d){var j=Math.min(a.length,b.length),c=Math.abs(a.length-b.length),f=0,e;for(e=0;e<j;e++)(d&&a[e]!==b[e]||
!d&&g(a[e])!==g(b[e]))&&f++;return f+c}function u(a){if(a)var b=a.toLowerCase().replace(/(.)s$/,"$1"),a=Aa[a]||Ba[b]||b;return a}function K(a){var b={},d,j;for(j in a)a.hasOwnProperty(j)&&(d=u(j))&&(b[d]=a[j]);return b}function za(a){var b,d;if(a.indexOf("week")===0)b=7,d="day";else if(a.indexOf("month")===0)b=12,d="month";else return;f[a]=function(j,e){var L,g,i=f.fn._lang[a],h=[];typeof j==="number"&&(e=j,j=c);g=function(a){a=f().utc().set(d,a);return i.call(f.fn._lang,a,j||"")};if(e!=null)return g(e);
else{for(L=0;L<b;L++)h.push(g(L));return h}}}function g(a){var a=+a,b=0;a!==0&&isFinite(a)&&(b=a>=0?Math.floor(a):Math.ceil(a));return b}function N(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function ca(a,b,d){return H(f([a,11,31+b-d]),b,d).week}function O(a){return a%4===0&&a%100!==0||a%400===0}function da(a){var b;if(a._a&&a._pf.overflow===-2){b=a._a[A]<0||a._a[A]>11?A:a._a[w]<1||a._a[w]>N(a._a[x],a._a[A])?w:a._a[y]<0||a._a[y]>23?y:a._a[G]<0||a._a[G]>59?G:a._a[I]<0||a._a[I]>59?I:a._a[J]<
0||a._a[J]>999?J:-1;if(a._pf._overflowDayOfYear&&(b<x||b>w))b=w;a._pf.overflow=b}}function ea(a){if(a._isValid==null&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict))a._isValid=a._isValid&&a._pf.charsLeftOver===0&&a._pf.unusedTokens.length===0;return a._isValid}function P(a){return a?a.toLowerCase().replace("_","-"):a}function Q(a,b){return b._isUTC?f(a).zone(b._offset||0):f(a).local()}
function z(a){var b=0,d,j,c,e,g=function(a){if(!D[a]&&ha)try{require("./lang/"+a)}catch(b){}return D[a]};if(!a)return f.fn._lang;if(!v(a)){if(j=g(a))return j;a=[a]}for(;b<a.length;){e=P(a[b]).split("-");d=e.length;for(c=(c=P(a[b+1]))?c.split("-"):null;d>0;){if(j=g(e.slice(0,d).join("-")))return j;if(c&&c.length>=d&&F(e,c,!0)>=d-1)break;d--}b++}return f.fn._lang}function Ca(a){if(a.match(/\[[\s\S]/))return a.replace(/^\[|\]$/g,"");return a.replace(/\\/g,"")}function Da(a){var b=a.match(ia),d,j;d=0;
for(j=b.length;d<j;d++)b[d]=B[b[d]]?B[b[d]]:Ca(b[d]);return function(c){var e="";for(d=0;d<j;d++)e+=b[d]instanceof Function?b[d].call(c,a):b[d];return e}}function S(a,b){if(!a.isValid())return a.lang().invalidDate();b=ja(b,a.lang());T[b]||(T[b]=Da(b));return T[b](a)}function ja(a,b){function d(a){return b.longDateFormat(a)||a}var j=5;for(M.lastIndex=0;j>=0&&M.test(a);)a=a.replace(M,d),M.lastIndex=0,j-=1;return a}function Ea(a,b){var d=b._strict;switch(a){case "Q":return ka;case "DDDD":return la;case "YYYY":case "GGGG":case "gggg":return d?
Fa:Ga;case "Y":case "G":case "g":return Ha;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return d?Ia:Ja;case "S":if(d)return ka;case "SS":if(d)return ma;case "SSS":if(d)return la;case "DDD":return Ka;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return La;case "a":case "A":return z(b._l)._meridiemParse;case "X":return Ma;case "Z":case "ZZ":return U;case "T":return Na;case "SSSS":return Oa;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return d?
ma:na;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return na;case "Do":return Pa;default:var d=RegExp,j;j=Qa(a.replace("\\","")).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return d(j)}}function oa(a){var a=(a||"").match(U)||[],a=((a[a.length-1]||[])+"").match(Ra)||["-",0,0],b=+(a[1]*60)+g(a[2]);return a[0]==="+"?-b:b}function V(a){var b,d=[],j,c,e,i,h;if(!a._d){j=Sa(a);if(a._w&&a._a[w]==null&&a._a[A]==null)b=function(b){var d=parseInt(b,10);return b?
b.length<3?d>68?1900+d:2E3+d:d:a._a[x]==null?f().weekYear():a._a[x]},c=a._w,c.GG!=null||c.W!=null||c.E!=null?b=pa(b(c.GG),c.W||1,c.E,4,1):(e=z(a._l),i=c.d!=null?qa(c.d,e):c.e!=null?parseInt(c.e,10)+e._week.dow:0,h=parseInt(c.w,10)||1,c.d!=null&&i<e._week.dow&&h++,b=pa(b(c.gg),h,i,e._week.doy,e._week.dow)),a._a[x]=b.year,a._dayOfYear=b.dayOfYear;if(a._dayOfYear){b=a._a[x]==null?j[x]:a._a[x];if(a._dayOfYear>(O(b)?366:365))a._pf._overflowDayOfYear=!0;b=W(b,0,a._dayOfYear);a._a[A]=b.getUTCMonth();a._a[w]=
b.getUTCDate()}for(b=0;b<3&&a._a[b]==null;++b)a._a[b]=d[b]=j[b];for(;b<7;b++)a._a[b]=d[b]=a._a[b]==null?b===2?1:0:a._a[b];d[y]+=g((a._tzm||0)/60);d[G]+=g((a._tzm||0)%60);a._d=(a._useUTC?W:Ta).apply(null,d)}}function Sa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function X(a){a._a=[];a._pf.empty=!0;var b=z(a._l),d=""+a._i,j,c,e,i,h=d.length,k=0;c=ja(a._f,b).match(ia)||[];for(b=0;b<c.length;b++){e=c[b];if(j=(d.match(Ea(e,
a))||[])[0])i=d.substr(0,d.indexOf(j)),i.length>0&&a._pf.unusedInput.push(i),d=d.slice(d.indexOf(j)+j.length),k+=j.length;if(B[e]){j?a._pf.empty=!1:a._pf.unusedTokens.push(e);i=a;var m=void 0,n=i._a;switch(e){case "Q":j!=null&&(n[A]=(g(j)-1)*3);break;case "M":case "MM":j!=null&&(n[A]=g(j)-1);break;case "MMM":case "MMMM":m=z(i._l).monthsParse(j);m!=null?n[A]=m:i._pf.invalidMonth=j;break;case "D":case "DD":j!=null&&(n[w]=g(j));break;case "Do":j!=null&&(n[w]=g(parseInt(j,10)));break;case "DDD":case "DDDD":if(j!=
null)i._dayOfYear=g(j);break;case "YY":n[x]=f.parseTwoDigitYear(j);break;case "YYYY":case "YYYYY":case "YYYYYY":n[x]=g(j);break;case "a":case "A":i._isPm=z(i._l).isPM(j);break;case "H":case "HH":case "h":case "hh":n[y]=g(j);break;case "m":case "mm":n[G]=g(j);break;case "s":case "ss":n[I]=g(j);break;case "S":case "SS":case "SSS":case "SSSS":n[J]=g(("0."+j)*1E3);break;case "X":i._d=new Date(parseFloat(j)*1E3);break;case "Z":case "ZZ":i._useUTC=!0;i._tzm=oa(j);break;case "w":case "ww":case "W":case "WW":case "d":case "dd":case "ddd":case "dddd":case "e":case "E":e=
e.substr(0,1);case "gg":case "gggg":case "GG":case "GGGG":case "GGGGG":if(e=e.substr(0,2),j)i._w=i._w||{},i._w[e]=j}}else a._strict&&!j&&a._pf.unusedTokens.push(e)}a._pf.charsLeftOver=h-k;d.length>0&&a._pf.unusedInput.push(d);a._isPm&&a._a[y]<12&&(a._a[y]+=12);a._isPm===!1&&a._a[y]===12&&(a._a[y]=0);V(a);da(a)}function Qa(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,d,j,c,e){return d||j||c||e})}function Ta(a,b,d,c,e,f,i){b=new Date(a,b,d,c,e,f,i);a<1970&&b.setFullYear(a);return b}
function W(a){var b=new Date(Date.UTC.apply(null,arguments));a<1970&&b.setUTCFullYear(a);return b}function qa(a,b){if(typeof a==="string")if(isNaN(a)){if(a=b.weekdaysParse(a),typeof a!=="number")return null}else a=parseInt(a,10);return a}function Ua(a,b,d,c,e){return e.relativeTime(b||1,!!d,a,c)}function H(a,b,d){b=d-b;d-=a.day();d>b&&(d-=7);d<b-7&&(d+=7);a=f(a).add("d",d);return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}}function pa(a,b,d,c,e){var f=W(a,0,1).getUTCDay(),b=7*(b-1)+((d!=null?d:
e)-e)+(e-f+(f>c?7:0)-(f<e?7:0))+1;return{year:b>0?a:a-1,dayOfYear:b>0?b:(O(a-1)?366:365)+b}}function ra(a){var b=a._i,d=a._f;if(b===null||d===c&&b==="")return f.invalid({nullInput:!0});if(typeof b==="string")a._i=b=z().preparse(b);if(f.isMoment(b)){var a=b,j={},i;for(i in a)a.hasOwnProperty(i)&&sa.hasOwnProperty(i)&&(j[i]=a[i]);a=j;a._d=new Date(+b._d)}else if(d)if(v(d)){var b=a,g,h;if(b._f.length===0)b._pf.invalidFormat=!0,b._d=new Date(NaN);else{for(i=0;i<b._f.length;i++)if(d=0,j=e({},b),j._pf=
l(),j._f=b._f[i],X(j),ea(j)&&(d+=j._pf.charsLeftOver,d+=j._pf.unusedTokens.length*10,j._pf.score=d,h==null||d<h))h=d,g=j;e(b,g||j)}}else X(a);else if(j=a,g=j._i,h=Va.exec(g),g===c)j._d=new Date;else if(h)j._d=new Date(+h[1]);else if(typeof g==="string")if(b=j._i,i=Wa.exec(b)){j._pf.iso=!0;g=0;for(h=Y.length;g<h;g++)if(Y[g][1].exec(b)){j._f=Y[g][0]+(i[6]||" ");break}g=0;for(h=Z.length;g<h;g++)if(Z[g][1].exec(b)){j._f+=Z[g][0];break}b.match(U)&&(j._f+="Z");X(j)}else f.createFromInputFallback(j);else if(v(g))j._a=
g.slice(0),V(j);else if(Object.prototype.toString.call(g)==="[object Date]"||g instanceof Date)j._d=new Date(+g);else if(typeof g==="object"){if(!j._d)g=K(j._i),j._a=[g.year,g.month,g.day,g.hour,g.minute,g.second,g.millisecond],V(j)}else typeof g==="number"?j._d=new Date(g):f.createFromInputFallback(j);return new m(a)}function ga(a,b){var d;if(typeof b==="string"&&(b=a.lang().monthsParse(b),typeof b!=="number"))return a;d=Math.min(a.date(),N(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,
d);return a}function R(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function fa(a,b,d){return b==="Month"?ga(a,d):a._d["set"+(a._isUTC?"UTC":"")+b](d)}function C(a,b){return function(d){return d!=null?(fa(this,a,d),f.updateOffset(this,b),this):R(this,a)}}function Xa(a){f.duration.fn[a]=function(){return this._data[a]}}function ta(a,b){f.duration.fn["as"+a]=function(){return+this/b}}function ua(a){if(typeof ender==="undefined")va=aa.moment,aa.moment=a?h("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",
f):f}var f,aa=typeof global!=="undefined"?global:this,va,E=Math.round,q,x=0,A=1,w=2,y=3,G=4,I=5,J=6,D={},sa={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ha=typeof module!=="undefined"&&module.exports,Va=/^\/?Date\((\-?\d+)/i,Ya=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Za=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ia=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,
M=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,na=/\d\d?/,Ka=/\d{1,3}/,Ga=/\d{1,4}/,Ja=/[+\-]?\d{1,6}/,Oa=/\d+/,La=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,U=/Z|[\+\-]\d\d:?\d\d/gi,Na=/T/i,Ma=/[\+\-]?\d+(\.\d{1,3})?/,Pa=/\d{1,2}/,ka=/\d/,ma=/\d\d/,la=/\d{3}/,Fa=/\d{4}/,Ia=/[+-]?\d{6}/,Ha=/[+-]?\d+/,Wa=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
Y=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Z=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ra=/([\+\-]|\d\d)/gi;"Date|Hours|Minutes|Seconds|Milliseconds".split("|");for(var ba={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},Aa={ms:"millisecond",s:"second",
m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ba={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},T={},wa="DDD w W M D d".split(" "),xa="M D H h m s w W".split(" "),B={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},
DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},YYYYYY:function(){var a=this.year();return(a>=0?"+":"-")+i(Math.abs(a),
6)},gg:function(){return i(this.weekYear()%100,2)},gggg:function(){return i(this.weekYear(),4)},ggggg:function(){return i(this.weekYear(),5)},GG:function(){return i(this.isoWeekYear()%100,2)},GGGG:function(){return i(this.isoWeekYear(),4)},GGGGG:function(){return i(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),
!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return g(this.milliseconds()/100)},SS:function(){return i(g(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},SSSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";a<0&&(a=-a,b="-");return b+i(g(a/60),2)+":"+i(g(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";a<0&&(a=-a,b="-");
return b+i(g(a/60),2)+i(g(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ya=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];wa.length;)q=wa.pop(),B[q+"o"]=k(B[q],q);for(;xa.length;)q=xa.pop(),B[q+q]=o(B[q],2);B.DDDD=o(B.DDD,3);e(p.prototype,{set:function(a){var b,d;for(d in a)b=a[d],typeof b==="function"?this[d]=b:this["_"+d]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,d;if(!this._monthsParse)this._monthsParse=[];for(b=0;b<12;b++)if(this._monthsParse[b]||(d=f.utc([2E3,b]),d="^"+this.months(d,"")+"|^"+this.monthsShort(d,""),this._monthsParse[b]=RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,d;if(!this._weekdaysParse)this._weekdaysParse=[];for(b=0;b<7;b++)if(this._weekdaysParse[b]||(d=f([2E3,1]).day(b),d="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,
""),this._weekdaysParse[b]=RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b);return b},isPM:function(a){return(a+"").toLowerCase().charAt(0)===
"p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,d){return a>11?d?"pm":"PM":d?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var d=this._calendar[a];return typeof d==="function"?d.apply(b):d},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",
y:"a year",yy:"%d years"},relativeTime:function(a,b,d,c){var e=this._relativeTime[d];return typeof e==="function"?e(a,b,d,c):e.replace(/%d/i,a)},pastFuture:function(a,b){var d=this._relativeTime[a>0?"future":"past"];return typeof d==="function"?d(b):d.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return H(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",
invalidDate:function(){return this._invalidDate}});f=function(a,b,d,e){var f;typeof d==="boolean"&&(e=d,d=c);f={_isAMomentObject:!0};f._i=a;f._f=b;f._l=d;f._strict=e;f._isUTC=!1;f._pf=l();return ra(f)};f.suppressDeprecationWarnings=!1;f.createFromInputFallback=h("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)});f.utc=function(a,
b,d,e){var f;typeof d==="boolean"&&(e=d,d=c);f={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0};f._l=d;f._i=a;f._f=b;f._strict=e;f._pf=l();return ra(f).utc()};f.unix=function(a){return f(a*1E3)};f.duration=function(a,b){var d=a,c=null,e;if(f.isDuration(a))d={ms:a._milliseconds,d:a._days,M:a._months};else if(typeof a==="number")d={},b?d[b]=a:d.milliseconds=a;else if(c=Ya.exec(a))e=c[1]==="-"?-1:1,d={y:0,d:g(c[w])*e,h:g(c[y])*e,m:g(c[G])*e,s:g(c[I])*e,ms:g(c[J])*e};else if(c=Za.exec(a))e=c[1]==="-"?-1:1,
d=function(a){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*e},d={y:d(c[2]),M:d(c[3]),d:d(c[4]),h:d(c[5]),m:d(c[6]),s:d(c[7]),w:d(c[8])};c=new t(d);if(f.isDuration(a)&&a.hasOwnProperty("_lang"))c._lang=a._lang;return c};f.version="2.6.0";f.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";f.momentProperties=sa;f.updateOffset=function(){};f.lang=function(a,b){if(!a)return f.fn._lang._abbr;if(b){var d=P(a);b.abbr=d;D[d]||(D[d]=new p);D[d].set(b)}else b===null?(delete D[a],a="en"):D[a]||z(a);return(f.duration.fn._lang=
f.fn._lang=z(a))._abbr};f.langData=function(a){if(a&&a._lang&&a._lang._abbr)a=a._lang._abbr;return z(a)};f.isMoment=function(a){return a instanceof m||a!=null&&a.hasOwnProperty("_isAMomentObject")};f.isDuration=function(a){return a instanceof t};for(q=ya.length-1;q>=0;--q)za(ya[q]);f.normalizeUnits=function(a){return u(a)};f.invalid=function(a){var b=f.utc(NaN);a!=null?e(b._pf,a):b._pf.userInvalidated=!0;return b};f.parseZone=function(){return f.apply(null,arguments).parseZone()};f.parseTwoDigitYear=
function(a){return g(a)+(g(a)>68?1900:2E3)};e(f.fn=m.prototype,{clone:function(){return f(this)},valueOf:function(){return+this._d+(this._offset||0)*6E4},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=f(this).utc();return 0<a.year()&&a.year()<=9999?S(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):S(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},
toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){return ea(this)},isDSTShifted:function(){if(this._a)return this.isValid()&&F(this._a,(this._isUTC?f.utc(this._a):f(this._a)).toArray())>0;return!1},parsingFlags:function(){return e({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=!1;return this},format:function(a){a=
S(this,a||f.defaultFormat);return this.lang().postformat(a)},add:function(a,b){var d;d=typeof a==="string"?f.duration(+b,a):f.duration(a,b);s(this,d,1);return this},subtract:function(a,b){var d;d=typeof a==="string"?f.duration(+b,a):f.duration(a,b);s(this,d,-1);return this},diff:function(a,b,d){var a=Q(a,this),c=(this.zone()-a.zone())*6E4,e,b=u(b);b==="year"||b==="month"?(e=(this.daysInMonth()+a.daysInMonth())*432E5,c=(this.year()-a.year())*12+(this.month()-a.month()),c+=(this-f(this).startOf("month")-
(a-f(a).startOf("month")))/e,c-=(this.zone()-f(this).startOf("month").zone()-(a.zone()-f(a).startOf("month").zone()))*6E4/e,b==="year"&&(c/=12)):(e=this-a,c=b==="second"?e/1E3:b==="minute"?e/6E4:b==="hour"?e/36E5:b==="day"?(e-c)/864E5:b==="week"?(e-c)/6048E5:e);return d?c:n(c)},from:function(a,b){return f.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(f(),a)},calendar:function(){var a=this.diff(Q(f(),this).startOf("day"),"days",!0);return this.format(this.lang().calendar(a<
-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse",this))},isLeapYear:function(){return O(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return a!=null?(a=qa(a,this.lang()),this.add({d:a-b})):b},month:C("Month",!0),startOf:function(a){a=u(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);
case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}a==="week"?this.weekday(0):a==="isoWeek"&&this.isoWeekday(1);a==="quarter"&&this.month(Math.floor(this.month()/3)*3);return this},endOf:function(a){a=u(a);return this.startOf(a).add(a==="isoWeek"?"week":a,1).subtract("ms",1)},isAfter:function(a,b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)>+f(a).startOf(b)},isBefore:function(a,
b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)<+f(a).startOf(b)},isSame:function(a,b){b=b||"ms";return+this.clone().startOf(b)===+Q(a,this).startOf(b)},min:function(a){a=f.apply(null,arguments);return a<this?this:a},max:function(a){a=f.apply(null,arguments);return a>this?this:a},zone:function(a,b){var d=this._offset||0;if(a!=null){if(typeof a==="string"&&(a=oa(a)),Math.abs(a)<16&&(a*=60),this._offset=a,this._isUTC=!0,d!==a)if(!b||this._changeInProgress)s(this,f.duration(d-
a,"m"),1,!1);else if(!this._changeInProgress)this._changeInProgress=!0,f.updateOffset(this,!0),this._changeInProgress=null}else return this._isUTC?d:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){this._tzm?this.zone(this._tzm):typeof this._i==="string"&&this.zone(this._i);return this},hasAlignedHourOffset:function(a){a=a?f(a).zone():0;return(this.zone()-a)%60===0},
daysInMonth:function(){return N(this.year(),this.month())},dayOfYear:function(a){var b=E((f(this).startOf("day")-f(this).startOf("year"))/864E5)+1;return a==null?b:this.add("d",a-b)},quarter:function(a){return a==null?Math.ceil((this.month()+1)/3):this.month((a-1)*3+this.month()%3)},weekYear:function(a){var b=H(this,this.lang()._week.dow,this.lang()._week.doy).year;return a==null?b:this.add("y",a-b)},isoWeekYear:function(a){var b=H(this,1,4).year;return a==null?b:this.add("y",a-b)},week:function(a){var b=
this.lang().week(this);return a==null?b:this.add("d",(a-b)*7)},isoWeek:function(a){var b=H(this,1,4).week;return a==null?b:this.add("d",(a-b)*7)},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return a==null?b:this.add("d",a-b)},isoWeekday:function(a){return a==null?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return ca(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return ca(this.year(),a.dow,a.doy)},get:function(a){a=u(a);return this[a]()},
set:function(a,b){a=u(a);if(typeof this[a]==="function")this[a](b);return this},lang:function(a){return a===c?this._lang:(this._lang=z(a),this)}});f.fn.millisecond=f.fn.milliseconds=C("Milliseconds",!1);f.fn.second=f.fn.seconds=C("Seconds",!1);f.fn.minute=f.fn.minutes=C("Minutes",!1);f.fn.hour=f.fn.hours=C("Hours",!0);f.fn.date=C("Date",!0);f.fn.dates=h("dates accessor is deprecated. Use date instead.",C("Date",!0));f.fn.year=C("FullYear",!0);f.fn.years=h("years accessor is deprecated. Use year instead.",
C("FullYear",!0));f.fn.days=f.fn.day;f.fn.months=f.fn.month;f.fn.weeks=f.fn.week;f.fn.isoWeeks=f.fn.isoWeek;f.fn.quarters=f.fn.quarter;f.fn.toJSON=f.fn.toISOString;e(f.duration.fn=t.prototype,{_bubble:function(){var a=this._milliseconds,b=this._days,d=this._months,c=this._data;c.milliseconds=a%1E3;a=n(a/1E3);c.seconds=a%60;a=n(a/60);c.minutes=a%60;a=n(a/60);c.hours=a%24;b+=n(a/24);c.days=b%30;d+=n(b/30);c.months=d%12;b=n(d/12);c.years=b},weeks:function(){return n(this.days()/7)},valueOf:function(){return this._milliseconds+
this._days*864E5+this._months%12*2592E6+g(this._months/12)*31536E6},humanize:function(a){var b=+this,d;d=!a;var c=this.lang(),e=E(Math.abs(b)/1E3),f=E(e/60),g=E(f/60),i=E(g/24),h=E(i/365),e=e<45&&["s",e]||f===1&&["m"]||f<45&&["mm",f]||g===1&&["h"]||g<22&&["hh",g]||i===1&&["d"]||i<=25&&["dd",i]||i<=45&&["M"]||i<345&&["MM",E(i/30)]||h===1&&["y"]||["yy",h];e[2]=d;e[3]=b>0;e[4]=c;d=Ua.apply({},e);a&&(d=this.lang().pastFuture(b,d));return this.lang().postformat(d)},add:function(a,b){var d=f.duration(a,
b);this._milliseconds+=d._milliseconds;this._days+=d._days;this._months+=d._months;this._bubble();return this},subtract:function(a,b){var d=f.duration(a,b);this._milliseconds-=d._milliseconds;this._days-=d._days;this._months-=d._months;this._bubble();return this},get:function(a){a=u(a);return this[a.toLowerCase()+"s"]()},as:function(a){a=u(a);return this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:f.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),d=
Math.abs(this.days()),c=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1E3);if(!this.asSeconds())return"P0D";return(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(d?d+"D":"")+(c||e||f?"T":"")+(c?c+"H":"")+(e?e+"M":"")+(f?f+"S":"")}});for(q in ba)ba.hasOwnProperty(q)&&(ta(q,ba[q]),Xa(q.toLowerCase()));ta("Weeks",6048E5);f.duration.fn.asMonths=function(){return(+this-this.years()*31536E6)/2592E6+this.years()*12};f.lang("en",{ordinal:function(a){var b=
a%10,b=g(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return a+b}});ha?module.exports=f:typeof define==="function"&&define.amd?(define("moment",function(a,b,d){if(d.config&&d.config()&&d.config().noGlobal===!0)aa.moment=va;return f}),ua(!0)):ua()}).call(this);r.WebSocket=function(c){this._url=c;this._connectionAttempts=0;this.on({"message:refresh":this._onRefresh},this)};
_.extend(r.WebSocket.prototype,Backbone.Events,{_backoffTime:2E3,_maximumRetries:9,_retryJitterAmount:3E3,start:function(){"WebSocket"in window&&this._connect()},_connect:function(){r.debug("websocket: connecting");this.trigger("connecting");this._socket=new WebSocket(this._url);this._socket.onopen=_.bind(this._onOpen,this);this._socket.onmessage=_.bind(this._onMessage,this);this._socket.onclose=_.bind(this._onClose,this);this._connectionAttempts+=1},_onOpen:function(){r.debug("websocket: connected");
this.trigger("connected");this._connectionAttempts=0},_onMessage:function(c){c=JSON.parse(c.data);r.debug('websocket: received "'+c.type+'" message');this.trigger("message message:"+c.type,c.payload)},_onRefresh:function(){setTimeout(function(){location.reload()},Math.random()*3E5)},_onClose:function(){if(this._connectionAttempts<this._maximumRetries){var c=Math.round(this._backoffTime*Math.pow(2,this._connectionAttempts)+(Math.random()*this._retryJitterAmount-this._retryJitterAmount/2));r.debug("websocket: connection lost, reconnecting in "+
c+"ms");r.debug("(can't connect? Make sure you've allowed https access in your browser.)");this.trigger("reconnecting",c);setTimeout(_.bind(this._connect,this),c)}else r.debug("websocket: maximum retries exceeded. bailing out"),this.trigger("disconnected")}});
(function(c,l,h,o){var l=c.liveupdate={},k=function(c){this._permissions=c};o.extend(k.prototype,{isSuperUser:function(){return!!this._permissions.all},allow:function(c){if(this.isSuperUser())return!0;return o.has(this._permissions,c)}});l.LiveUpdateApp=function(){var l=h(".content > header"),m=h('<div id="liveupdate-options">');this.permissions=new k(c.config.liveupdate_permissions);this.event=new c.liveupdate.event.LiveUpdateEvent;this.eventView=new c.liveupdate.event.LiveUpdateEventView({model:this.event});
this.statusBarView=new c.liveupdate.statusBar.StatusBarView({model:this.event,el:h("#liveupdate-statusbar")});this.event.fetch();this.listing=new c.liveupdate.listings.LiveUpdateListing;this.listingView=new c.liveupdate.listings.LiveUpdateListingView({model:this.listing,permissions:this.permissions});this.listing.fetch({reset:!0});this.embedViewer=new c.liveupdate.embeds.EmbedViewer({model:this.listing,el:this.listingView.el});this.embedViewer.start();if(c.config.liveupdate_websocket){this.websocket=
new c.WebSocket(c.config.liveupdate_websocket);this.websocket.on({connecting:function(){this.event.set("socket_state","connecting")},connected:function(){this.event.set("socket_state","connected")},disconnected:function(){this.event.set("socket_state","disconnected")},reconnecting:function(c){this.event.set({socket_state:"reconnecting",reconnect_delay:c})},"message:activity":function(c){this.event.set({viewer_count:c.count,viewer_count_fuzzed:c.fuzzed})},"message:settings":function(c){this.event.set(c)},
"message:update":function(h){this.listing.add(c.liveupdate.listings.LiveUpdate.prototype.parse(h),{at:0})},"message:delete":function(c){this.listing.remove(c)},"message:strike":function(c){this.listing.get(c).set("stricken",!0)},"message:embeds_ready":function(c){this.listing.get(c.liveupdate_id).set("embeds",c.media_embeds);this.embedViewer.restart()},"message:complete":function(){this.event.set("state","complete");m.remove();h("#new-update-form").remove()}},this);if("Notification"in window&&!h("body").hasClass("embed"))this.desktopNotifier=
new c.liveupdate.notifications.DesktopNotifier({model:this.listing}),this.desktopNotifier.render(),h("<label>").text(c._("popup notifications")).prepend(this.desktopNotifier.$el).appendTo(m);this.websocket.start()}this.activityTracker=new c.liveupdate.activity.ActivityTracker;this.faviconUpdater=new c.liveupdate.favicon.UnreadUpdateCounter({model:this.listing});m.insertAfter(l)}})(r,Backbone,jQuery,_);$(function(){if($("body").hasClass("liveupdate-event"))r.liveupdate.app=new r.liveupdate.LiveUpdateApp});
(function(c,l,h,o){(c.liveupdate.activity={}).ActivityTracker=l.View.extend({initialize:function(){this.reportsSent=0;this.reportPending=!1;h(document).on("visibilitychange",h.proxy(this.onVisibilityChange,this));this.reportActivity()},onVisibilityChange:function(){!document.hidden&&this.reportPending&&this.reportActivity()},reportActivity:function(){if(document.hidden)this.reportPending=!0;else{var h;this.reportsSent>0&&window._gaq&&_gaq.push(["_trackEvent","Heartbeat","Heartbeat","",0,!0]);(new Image).src=
"//"+c.config.liveupdate_pixel_domain+"/live/"+c.config.liveupdate_event+"/pixel.png?rand="+Math.random();this.reportsSent+=1;this.reportPending=!1;h=Math.floor(6E5-6E5*Math.random()/2);setTimeout(o.bind(this.reportActivity,this),h)}}})})(r,Backbone,jQuery,_);
(function(c,l,h,o){(c.liveupdate.embeds={}).EmbedViewer=c.ScrollUpdater.extend({selector:".pending-embed",initialize:function(){this._embedBase="//"+c.config.media_domain+"/mediaembed/liveupdate/"+c.config.liveupdate_event;this.listenTo(this.model,"add",this.restart);c.ScrollUpdater.prototype.initialize.apply(this,arguments)},_listen:function(){h(window).on("message",h.proxy(this,"_handleMessage"));c.ScrollUpdater.prototype._listen.apply(this,arguments)},update:function(k){var l=k.data("fullname"),
m=this.model.get(l).get("embeds");k.hasClass("pending-embed")&&(k.removeClass("pending-embed"),o.each(m,function(m,e){var n=k.find('a[href="'+m.url+'"]'),i=this._embedBase+"/"+l+"/"+e,i=h("<iframe>").attr({"class":"embedFrame",id:"embed-"+l+"-"+e,src:i,width:m.width,height:m.height||200,scrolling:"no",frameborder:0});c.debug("Rendering embed for link: ",n);n.replaceWith(i)},this))},_handleMessage:function(k){k=k.originalEvent;if(k.origin.replace(/^https?:\/\//,"")!==c.config.media_domain)return!1;
k=JSON.parse(k.data);k.action==="dimensionsChange"&&h("#embed-LiveUpdate_"+k.updateId+"-"+k.embedIndex).attr({width:Math.min(k.width,480),height:k.height})}})})(r,Backbone,jQuery,_);
(function(c,l,h){var o=c.liveupdate.event={};o.LiveUpdateEvent=l.Model.extend({defaults:{socket_state:"connecting"},url:function(){return"/live/"+c.config.liveupdate_event+"/about.json"},parse:function(c){return c.data}});o.LiveUpdateEventView=l.View.extend({initialize:function(){this.$titleEl=h("#liveupdate-title");this.$descriptionEl=h("#liveupdate-description");this.listenTo(this.model,{"change:title":this.renderTitle,"change:description_html":this.renderDescription})},renderTitle:function(){this.$titleEl.text(this.model.get("title"))},
renderDescription:function(){var c;if(!this.$descriptionEl.length)this.$descriptionEl=h('<section id="liveupdate-description" class="md">');(c=this.model.get("description_html"))?this.$descriptionEl.html(c).prependTo("aside.sidebar"):this.$descriptionEl.remove()}})})(r,Backbone,jQuery);
(function(c,l,h,o){(c.liveupdate.favicon={}).UnreadUpdateCounter=l.View.extend({initialize:function(){this.unreadItemCount=0;h.setOptions({background:"#ff4500"});h.setImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAA/1BMVEUpLzY+PDpGSk5HR0dKTlNSW2VTXGVVXmdWWl5bYWZdZGtfanVfbHpgXVtianNjbXhkZWdkam1lcX1nc4BpdYJqa2xscHZucHJueYRvfoxwfIhxcG93e4B3h5h4iJh5ipt7gIB8ipl+fn6BgYGImKOJh4aKjY2Mna6NobSOn7CQo7iar8Wfnp2juM6lo6Gmuc6mu8moqaqsw9etwcmurq6vrauxyN2xyN+0s7K+u7m/1u7C2vPF3fbI4PrJ4fvJ4/7Ly8vPzMnP6P7S0tLT0c/W8P/Z19Xd9/7d+P7e3Nrw8PDz9vT69/T+EA/+MjD+pqT+srD+w8H+zsz+/v7///9fla50AAAAuElEQVR42l2P2RaBUBhGT0WZ54jIPM8h0zE7SBL97/8uYoXFvtwXe30fIn8ggn94i8XMGSkFQvmPwFXvwOe/OGyx3OJYF+OUq26LcS2LMs05Xj0bPY+QDFc6k1bOnRQ8PYLiKlXW4IlWptQ4QWlxCIZ+h7tuwFBME9RgAG5XE8zrDYBpWNEEfElY0RO7Aejvzrs+wIa1xFGmp7AuFoprmNLya4fC8aP9YT/iOeX9pS1Fg1GpbZ/74wFo2jf64C4agwAAAABJRU5ErkJggg==");this.listenTo(this.model,
"add",this.onUpdateAdded);o(document).on("visibilitychange",o.proxy(this.onVisibilityChange,this));this.onVisibilityChange()},onUpdateAdded:function(c,l,m){m.at===0&&document.hidden&&(this.unreadItemCount+=1,h.setBubble(this.unreadItemCount))},onVisibilityChange:function(){if(!document.hidden)h.setBubble(),this.unreadItemCount=0}})})(r,Backbone,Tinycon,jQuery);
(function(c,l,h){var o=c.liveupdate.listings={},k=function(c){return moment(c)},p=function(){c.TimeText.apply(this,arguments)};_.extend(p.prototype,c.TimeText.prototype,{formatTime:function(e,h,i,m){var k=h/60/60/24;if(k<1&&!e.hasClass("absolute"))return c.TimeText.prototype.formatTime.apply(this,arguments);i=moment(i);m=moment(m);return i.format("YYYY-MM-DD")==m.format("YYYY-MM-DD")?i.format("LT"):k<365?i.format("D MMM LT"):i.format("lll")}});var m=o.LiveUpdate=l.Model.extend({parse:function(c){return{id:c.data.name,
date:c.data.created_utc*1E3,author:c.data.author,stricken:c.data.stricken,body:c.data.body_html,embeds:c.data.embeds}},_sendRPC:function(e){return c.ajax({type:"POST",dataType:"json",url:"/api/live/"+c.config.liveupdate_event+"/"+e,data:{id:this.get("id")}})},strike:function(){return this._sendRPC("strike_update")},destroy:function(){return this._sendRPC("delete_update")}});o.LiveUpdateListing=l.Collection.extend({model:m,url:function(){return"/live/"+c.config.liveupdate_event+".json"},initialize:function(){this._updatesFetched=
0;this.hasMoreToFetch=!0},fetchMore:function(){return this.fetch({remove:!1,data:{after:this.last().get("id"),count:this._updatesFetched}})},parse:function(c){var h=c.data.children;this._updatesFetched+=h.length;this.hasMoreToFetch=!!c.data.after;return h}});var t=o.LiveUpdateView=l.View.extend({tagName:"li",className:"liveupdate",events:{"confirm .strike":"onStrike","confirm .delete":"onDelete"},initialize:function(c){this.permissions=c.permissions;this.listenTo(this.model,{"change:stricken":this.onStrickenChange,
"change:embeds":this.markPendingEmbeds})},addEditButtonsIfAllowed:function(){if(this.model.get("author")===c.config.logged||this.permissions.allow("edit")){var e=h('<ul class="buttonrow">');this.model.get("stricken")||e.append(c.templates.make("liveupdate/edit-button",{name:"strike",label:c._("strike")}));e.append(c.templates.make("liveupdate/edit-button",{name:"delete",label:c._("delete")}));e.find("button").each(function(e,i){new c.ui.ConfirmButton({el:i})});this.$el.append(e)}return this},onStrickenChange:function(){this.$el.toggleClass("stricken",
this.model.get("stricken"));this.model.get("stricken")&&this.$el.find("button.strike").remove();return this},markPendingEmbeds:function(){this.$el.addClass("pending-embed")},renderFullTimestamp:function(c){c===void 0&&(c=k(this.model.get("date")));this.$el.find("time").attr("title",c.format("LLL Z"));return this},render:function(){var e=k(this.model.get("date"));this.$el.data("fullname",this.model.get("id")).html(c.templates.make("liveupdate/update",{body:this.model.get("body"),authorName:this.model.get("author"),
isoDate:e.toISOString()}));this.addEditButtonsIfAllowed().renderFullTimestamp().onStrickenChange();this.model.get("embeds")&&this.markPendingEmbeds();return this},onStrike:function(){var e=this.$el.find(".strike.confirm-button");e.text(c._("striking\u2026"));this.model.strike().done(function(){e.text(c._("stricken"))})},onDelete:function(){var e=this.$el.find(".strike.confirm-button");e.text(c._("deleting\u2026"));this.model.destroy().done(function(){e.text(c._("deleted"))})}});o.LiveUpdateListingView=
l.View.extend({el:".liveupdate-listing",initialize:function(e){this.permissions=e.permissions;this.timeText=new p({maxage:!1});this.timeTextScrollListener=new c.ui.TimeTextScrollListener({el:this.el,timeText:this.timeText});this.views={};this.listenTo(this.model,{add:this.onAdd,remove:this.onRemove,reset:this.onReset});h(window).on("scroll.liveupdateListing",h.proxy(this,"onScroll"));this.$el.siblings("nav.nextprev").remove()},onReset:function(){var c;this.model.each(function(h){var i=this.$el.find(".id-"+
h.id),m,k;m=new t({el:i,model:h,permissions:this.permissions});m.addEditButtonsIfAllowed().renderFullTimestamp();c&&(k=this.makeSeparator(h,c))&&i.before(k);c=h;this.views[h.id]=m},this);this.onScroll();this.timeTextScrollListener.start()},onAdd:function(e,h,i){var h=new t({model:e,permissions:this.permissions}),m=h.render().el;this.timeText.refreshOne(h.$("time.live-timestamp"));var k=this.model.indexOf(e),m=[m];if(i.at===0)(i=this.makeSeparator(this.model.at(k+1),e))&&m.push(i),this.$el.prepend(m);
else if(i.at===void 0)i=this.model.at(k-1),(i=this.makeSeparator(e,i))&&m.unshift(i),this.$el.append(m);else{c.error("wanted to insert update at arbitrary position");return}this.timeTextScrollListener.restart();this.views[e.id]=h},makeSeparator:function(e,m){var i=k(e.get("date")),l=k(m.get("date"));if(i.hour()!==l.hour())return i=l.minutes(0).seconds(0).milliseconds(0),i=h(h.parseHTML(c.templates.make("liveupdate/separator",{isoDate:i.toISOString()}))),this.timeText.refreshOne(i.find("time.live-timestamp")),
i.get(0)},onRemove:function(c){this.views[c.id].remove();delete this.views[c.id]},onScroll:function(){if(!(this.fetchingMore&&this.fetchingMore.state()==="pending"))if(this.model.hasMoreToFetch){var e=this.$el.offset().top+this.$el.height()-window.innerHeight;if(h(window).scrollTop()+250>=e)this.fetchingMore=this.model.fetchMore(),c.ui.showWorkingDeferred(this.$el,this.fetchingMore)}else h(window).off("scroll.liveupdateListing")}})})(r,Backbone,jQuery);
(function(c,l,h,o,k){function p(c,h){if(c.length>h)return c.substring(0,h)+"\u2026";return c}(c.liveupdate.notifications={}).DesktopNotifier=l.View.extend({tagName:"input",attributes:{type:"checkbox"},events:{change:"onSettingsChange"},initialize:function(){this.storageKey="live."+c.config.liveupdate_event+".notifications";this.requestingPermission=!1;this.notificationsDesired=Notification.permission==="granted"?k.safeGet(this.storageKey):!1;this.notifications=[];this.listenTo(this.model,"add",this.onNewUpdate);
h(document).on("visibilitychange",h.proxy(this,"onVisibilityChange"))},shouldNotify:function(){return this.notificationsDesired&&Notification.permission==="granted"&&document.hidden},onNewUpdate:function(m,k,e){if(e.at===0&&this.shouldNotify()&&m.get("author")!==c.config.logged){var l=this,k=h("#liveupdate-title").text(),m=h(h.parseHTML(m.get("body"))).text(),i=new Notification(k,{body:p(m,160),icon:c.utils.staticURL("liveupdate-notification-icon.png")});this.notifications.push(i);i.onclick=function(c){window.focus();
c.preventDefault()};i.onclose=function(c){c=l.notifications.indexOf(c.target);l.notifications.splice(c,1)};setTimeout(function(){i.close()},1E4)}},onVisibilityChange:function(){document.hidden||this.clearNotifications()},onSettingsChange:function(){this.notificationsDesired=this.$el.prop("checked");k.safeSet(this.storageKey,this.notificationsDesired);this.notificationsDesired&&Notification.permission!=="granted"&&this.requestPermission()},requestPermission:function(){this.requestingPermission=!0;
Notification.requestPermission(o.bind(this.onPermissionChange,this));this.render()},onPermissionChange:function(){this.requestingPermission=!1;this.render()},clearNotifications:function(){o.invoke(this.notifications,"close")},render:function(){this.$el.prop("disabled",this.requestingPermission||Notification.permission==="denied").prop("checked",this.notificationsDesired);return this}})})(r,Backbone,jQuery,_,store);
(function(c,l,h,o){var k=c.liveupdate.statusBar={},p=function(c,h){this._tickCallback=c;this._deadline=Date.now()+h;this._interval=setInterval(o.bind(this._onTick,this),1E3);this._onTick()};o.extend(p.prototype,{cancel:function(){if(this._interval)clearInterval(this._interval),this._interval=null},_onTick:function(){var c=this._deadline-Date.now(),c=Math.round(c/1E3);c>=1?this._tickCallback(c):this.cancel()}});k.StatusBarView=l.View.extend({tagName:"div",className:"status-bar",initialize:function(){this.listenTo(this.model,
{"change:state change:delay_remaining":this.renderState,"change:socket_state":this.onSocketStateChange,"change:viewer_count":this.renderViewerCount})},_stateText:function(){var h;switch(this.model.get("state")){case "complete":return{text:c._("no further updates")};case "live":switch(this.model.get("socket_state")){case "connecting":return{text:c._("connecting"),titleText:c._("connecting to update server")};case "connected":return{text:c._("live"),titleText:c._("updating in real time")};case "disconnected":return{text:c._("could not connect to update servers. please refresh")};
case "reconnecting":return h=this.model.get("delay_remaining"),{text:c.P_("disconnected. retrying in %(delay)s second...","disconnected. retrying in %(delay)s seconds...",h).format({delay:h})}}}},onSocketStateChange:function(){var c=this;if(this.model.get("socket_state")==="reconnecting")this._reconnectCountdown=new p(function(h){c.model.set("delay_remaining",h)},this.model.get("reconnect_delay"));else{if(this._reconnectCountdown)this._reconnectCountdown.cancel(),this._reconnectCountdown=null;this.renderState()}},
renderState:function(){var c=[this.className,this.model.get("state"),this.model.get("socket_state")],h=this.$(".state"),e=this._stateText();this.$el.attr("class",c.join(" "));h.text(e.text).attr("title",e.titleText||"");return this},renderViewerCount:function(){var k=this.$viewerCount||h('<p class="viewer-count">'),l=this.model.get("viewer_count"),e=c.P_("%(num)s viewer","%(num)s viewers",l),n=this.model.get("viewer_count_fuzzed")?"~":"";k.text(e.format({num:n+l}));if(!this.$viewerCount)this.$viewerCount=
k,this.$el.append(k);return this}})})(r,Backbone,jQuery,_);r.templates.set([{style:"html",name:"liveupdate/update",template:'<time class="live-timestamp" datetime="<%- thing.isoDate %>"></time>\n\n<div class="body">\n  <%= thing.body %>\n  <% if (typeof(thing.authorName) !== \'null\') { %>\n  <a href="/user/<%- thing.authorName %>" class="author">/u/<%- thing.authorName %></a>\n  <% } %>\n</div>\n'}]);r.templates.set([{style:"html",name:"liveupdate/separator",template:'<li class="separator">\n  <time class="live-timestamp absolute" datetime="<%- thing.isoDate %>"></time>\n</li>\n'}]);
r.templates.set([{style:"html",name:"liveupdate/edit-button",template:'<li><button class="<%- thing.name %>"><%- thing.label %></button></li>\n'}]);
r.permissions=_.extend(r.permissions||{},{liveupdate_contributor:{edit:{description:r.N_("strike and delete others' updates"),title:r.N_("edit")},close:{description:r.N_("permanently close the stream"),title:r.N_("close stream")},manage:{description:r.N_("add, remove, and change permissions of contributors"),title:r.N_("manage contributors")},update:{description:r.N_("post updates"),title:r.N_("update")},settings:{description:r.N_("change the title and description"),title:r.N_("settings")}}});
// moment.js language configuration
// language : hrvatski (hr)
// author : Bojan Marković : https://github.com/bmarkovic

// based on (sl) translation by Robert Sedovšek

(function (factory) {
    if (typeof define === 'function' && define.amd) {
        define(['moment'], factory); // AMD
    } else if (typeof exports === 'object') {
        module.exports = factory(require('../moment')); // Node
    } else {
        factory(window.moment); // Browser global
    }
}(function (moment) {

    function translate(number, withoutSuffix, key) {
        var result = number + " ";
        switch (key) {
        case 'm':
            return withoutSuffix ? 'jedna minuta' : 'jedne minute';
        case 'mm':
            if (number === 1) {
                result += 'minuta';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'minute';
            } else {
                result += 'minuta';
            }
            return result;
        case 'h':
            return withoutSuffix ? 'jedan sat' : 'jednog sata';
        case 'hh':
            if (number === 1) {
                result += 'sat';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'sata';
            } else {
                result += 'sati';
            }
            return result;
        case 'dd':
            if (number === 1) {
                result += 'dan';
            } else {
                result += 'dana';
            }
            return result;
        case 'MM':
            if (number === 1) {
                result += 'mjesec';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'mjeseca';
            } else {
                result += 'mjeseci';
            }
            return result;
        case 'yy':
            if (number === 1) {
                result += 'godina';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'godine';
            } else {
                result += 'godina';
            }
            return result;
        }
    }

    return moment.lang('hr', {
        months : "sječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),
        monthsShort : "sje._vel._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),
        weekdays : "nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),
        weekdaysShort : "ned._pon._uto._sri._čet._pet._sub.".split("_"),
        weekdaysMin : "ne_po_ut_sr_če_pe_su".split("_"),
        longDateFormat : {
            LT : "H:mm",
            L : "DD. MM. YYYY",
            LL : "D. MMMM YYYY",
            LLL : "D. MMMM YYYY LT",
            LLLL : "dddd, D. MMMM YYYY LT"
        },
        calendar : {
            sameDay  : '[danas u] LT',
            nextDay  : '[sutra u] LT',

            nextWeek : function () {
                switch (this.day()) {
                case 0:
                    return '[u] [nedjelju] [u] LT';
                case 3:
                    return '[u] [srijedu] [u] LT';
                case 6:
                    return '[u] [subotu] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[u] dddd [u] LT';
                }
            },
            lastDay  : '[jučer u] LT',
            lastWeek : function () {
                switch (this.day()) {
                case 0:
                case 3:
                    return '[prošlu] dddd [u] LT';
                case 6:
                    return '[prošle] [subote] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[prošli] dddd [u] LT';
                }
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : "za %s",
            past   : "prije %s",
            s      : "par sekundi",
            m      : translate,
            mm     : translate,
            h      : translate,
            hh     : translate,
            d      : "dan",
            dd     : translate,
            M      : "mjesec",
            MM     : translate,
            y      : "godinu",
            yy     : translate
        },
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });
}));
;r.i18n.addMessages({"settings": [null, "postavke"], "deleted": [null, "izbrisano"], "edit": [null, "uredi"], "stricken": [null, "opomenut"], "live": [null, "u\u017eivo"], "strike": [null, "opomena"], "delete": [null, "izbri\u0161i"]});